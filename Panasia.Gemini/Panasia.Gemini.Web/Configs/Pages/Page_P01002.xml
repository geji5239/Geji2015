<?xml version="1.0"?>
<MvcEditPage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" PageID="P01002" Controller="" DefaultAction="">
  <Action ActionID="A01035" Name="Index" Title="列表" ActionValue="1">
    <Command CommandID="M01191" Name="列表页面copy" CommandType="IndexPageActionCommand"><![CDATA[<IndexPageActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html">
  <Page SettingType="IndexPage">
    <ToolBar Tag="div" ID="toolbar" Class="toolbar-panel" PageID="P01002">
      <Buttons>
        <UIButton ID="btn-search" Class="easyui-linkbutton normal-button" Options="iconCls:'icon-search',plain:true" Title="检索" ActionValue="2" Action="showActDlg('检索','/Page/P01002/Search1',400,300)" />
        <UIButton ID="btn-detail" Class="easyui-linkbutton toolradio normal-button" Options="iconCls:'icon-detail',plain:true" Title="查看" ActionValue="4" Action="showActDlg_DGItemActDlg('datagrid', '查看', '/Page/P01002/Detail', 400, 300)" />
        <UIButton ID="btn-create" Class="easyui-linkbutton normal-button" Options="iconCls:'icon-add',plain:true" Title="新增" ActionValue="8" Action="showActDlg('新增', '/Page/P01002/Create', 400, 300)" />
        <UIButton ID="btn-edit" Class="easyui-linkbutton toolradio normal-button" Options="iconCls:'icon-edit',plain:true" Title="编辑" ActionValue="16" Action="showActDlg_DGItemActDlg('datagrid', '编辑', '/Page/P01002/Edit', 400, 300)" />
        <UIButton ID="btn-delete" Class="easyui-linkbutton toolmultiple normal-button" Options="iconCls:'icon-cancel',plain:true" Title="删除" ActionValue="32" Action="showActDlg_DGItemsConfirm('datagrid', '删除', '确认删除选择项?', '/Page/P01002/Delete', 400, 300)" />
        <UIButton />
      </Buttons>
    </ToolBar>
    <DataGrid Tag="table" ID="datagrid" Class="easyui-datagrid" Options="url:'/Page/P01002/Query',fitColumns:true,fit:true,pagination: true,rownumbers: true,nowrap: true,striped: true,collapsible: false,resizable:true,onClickRow:oncheckstate,onSelect:oncheckstate,onCheck:oncheckstate,onCheckAll:oncheckstate,onUncheckAll:oncheckstate,onUncheck:oncheckstate,onUnselect:oncheckstate,onClickRow:oncheckstate,onSelect:oncheckstate,onCheck:oncheckstate,onCheckAll:oncheckstate,onUncheckAll:oncheckstate,onUncheck:oncheckstate,onUnselect:oncheckstate" Key="DeptID">
      <Column Title="id" FieldName="DeptID" IsCheckBox="true" />
      <Column Title="部门名称" FieldName="DeptName" />
      <Column Title="上级部门" FieldName="ParentName" />
      <Column Title="所属公司" FieldName="CompanyName" />
      <Column Title="事业部" FieldName="BUName" />
      <Column Title="负责人" FieldName="ManagerName" />
      <Column Title="备注" FieldName="Description" />
    </DataGrid>
  </Page>
</IndexPageActionCommand>]]></Command>
    <Command CommandID="M01076" Name="列表页面" Description="这个命令会直接返回到客户端，无需后继命令" CommandType="FormViewActionCommand"><![CDATA[<FormViewActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html" ViewPath="~/Views/Page/Index.cshtml" SettingType="IndexPage">
  <Form Style="border: 0px;top:40px;margin:10px;" Options="region:'center'" IsContainer="false">
    <Controls>
      <ToolBar ID="toolbar" Class="content-padding" Options="region:'north'">
        <Controls>
          <StackPanel ID="toolbar" Class="toolbar-panel">
            <Controls>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-search" Class="easyui-linkbutton normal-button" Options="iconCls:'icon-search',plain:true" Title="检索" Action="showActDlg('检索','/Page/P01002/Search',400,300)" ActionValue="2" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-detail" Class="easyui-linkbutton toolradio normal-button" Options="iconCls:'icon-detail',plain:true" Title="查看" Action="showActDlg_DGItemActDlg('datagrid', '查看', '/Page/P01002/Detail', 400, 300)" ActionValue="4" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-create" Class="easyui-linkbutton normal-button" Options="iconCls:'icon-add',plain:true" Title="新增" Action="showActDlg('新增', '/Page/P01002/Create', 400, 300)" ActionValue="8" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-edit" Class="easyui-linkbutton toolradio normal-button" Options="iconCls:'icon-edit',plain:true" Title="修改" Action="showActDlg_DGItemActDlg('datagrid', '修改', '/Page/P01002/Edit', 400, 300)" ActionValue="16" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-delete" Class="easyui-linkbutton toolmultiple normal-button" Options="iconCls:'icon-cancel',plain:true" Title="删除" Action="showActDlg_DGItemsConfirm('datagrid', '删除', '确认删除选择项?', '/Page/P01002/Delete', 400, 300)" ActionValue="32" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-import" Class="easyui-linkbutton normal-button" Options="iconCls:'icon-import',plain:true" Title="导入" Action="showActDlg('导入', '/Page/P01003/Import', 400, 300)" ActionValue="64" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <Button ID="btn-export" Class="easyui-linkbutton normal-button" Options="iconCls:'icon-export',plain:true" Title="导出" Action="showActDlg('导出', '~/Page/P01003/Export', 400, 300)" ActionValue="128" />
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
              <StackPanel Class="toolbutton">
                <Controls>
                  <StackPanel Class="datagrid-btn-separator">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
            </Controls>
          </StackPanel>
        </Controls>
      </ToolBar>
      <StackPanel ID="contian" Class="content-padding" Options="region:'center',title:'部门',pageNumber:1,pageSize:10">
        <Controls>
          <GridView ID="datagrid" Class="easyui-datagrid" Options="fitColumns:true,fit:true,pagination: true,rownumbers: true,nowrap: true,striped: true,collapsible: false,resizable:true" Key="DeptID">
            <Columns>
              <Column Title="部门名称" FieldName="DeptName" />
              <Column Title="上级部门" FieldName="ParentName" />
              <Column Title="所属公司" FieldName="CompanyName" />
              <Column Title="事业部" FieldName="BUName" />
              <Column Title="负责人" FieldName="ManagerName" />
              <Column Title="备注" FieldName="Description" Options="width:200" />
            </Columns>
          </GridView>
        </Controls>
      </StackPanel>
    </Controls>
  </Form>
</FormViewActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01036" Name="Search" Title="检索" ActionValue="2">
    <Command CommandID="M01358" Name="检索部门" CommandType="EditDialogActionCommand"><![CDATA[<EditDialogActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html">
  <Parameter Name="CompanyName" Path="Results[返回公司].Items" Type="Parameter" />
  <Parameter Name="BUName" Path="Results[返回事业部].Items" Type="Parameter" />
  <Parameter Name="CompanyID" Path="CurrentUserProfiles" Type="SystemParameter" DefaultValue="CompanyID" />
  <Parameter Name="Default" Type="Const" DefaultValue="000000" />
  <Parameter Name="Name" Path="CurrentUserProfiles" Type="SystemParameter" DefaultValue="CompanyName" />
  <Page SettingType="EditDialog">
    <ContentHeader>&lt;script type="text/javascript"&gt;
$(function(){
var items='';
var tree='';

 $("#Parent").combobox({
  mode:'remote',
  loader:function(param,success,error)
  {
   var q=param.q;
   if(q==undefined) q='';
   $.ajax({
    url:$("#Parent").combobox('options').url+encodeURIComponent(q),
    type:'post',
    success:function(data){
     tree=$.map(data,function(item){
      return {ID:item.ID,Name:item.Name};
     });
     success(tree);
    }
   })
  },
            onLoadSuccess: function ()
            {
                $("#Parent").next().children("span").remove();
            }
 })
$("#CompanyID").combobox({
            mode:'remote',
            loader: function (param,success, row)
            {
                var q = param.q;
                if (q == undefined) q = "";
                $.ajax({
                    url: "/Share/Query?name=GetCompanyNameByKey&amp;Key=" + encodeURIComponent(q),
                    type: 'post',
                    success: function (data) {
                         items = $.map(data, function (item) {
                            return { CompanyID: item.CompanyID, Name: item.JC};
                        });
                        success(items);
                    }
                })
            }
,onLoadSuccess: function ()
{
$("#CompanyID").next().children(":text").unbind('blur').bind('blur',function(){
$("#CompanyID").combobox('select',items[0].CompanyID)
$("#CompanyID").next().children(":text").val(items[0].Name)
$("#CompanyID").combobox('getValue')
})
}
        })
})
&lt;/script&gt;</ContentHeader>
    <Form ID="dataform" Class="form-dialog">
      <TableLayout />
      <Fields>
        <Field ColumnSpan="2" Title="部门名称" FieldType="TextBox">
          <Input Tag="input" Name="Name" Class="edit-input easyui-textbox" Options="validType:'length[1,20]',invalidMessage:'部门名称不能大于20'" IsRequired="false" />
        </Field>
        <Field ColumnIndex="2" ColumnSpan="2" Title="所属公司" FieldType="ComboBox">
          <ComboBox Tag="input" ID="CompanyID" Name="CompanyID" Class="edit-input easyui-combobox" Options="validType:'length[1,20]',invalidMessage:'所属公司不能大于20'" IsRequired="false" DisplayMember="Name" ValueMember="CompanyID" DataUrl="/Share/Query?name=GetCompanyNameByKey&amp;Key=" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;var url='/Share/Query?name=GetDeptNameByKey&amp;CompanyID='+rec.CompanyID+'&amp;Key=';&#xD;&#xA;var url1='/Share/Query?name=GetManager&amp;resultformat=jsontree&amp;root=000000&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID='+rec.CompanyID&#xD;&#xA;+'&amp;CompanyName='+rec.Name;&#xD;&#xA;$('#Parent').combobox({url:url});&#xD;&#xA;$('#Manager').combotree({url:url1});&#xD;&#xA;}" />
        </Field>
        <Field RowIndex="1" ColumnSpan="2" Title="部门" FieldType="ComboBox">
          <ComboBox Tag="input" ID="Parent" Name="ParentID" Class="easyui-combobox edit-input" Options="editable:true" IsRequired="false" DisplayMember="Name" ValueMember="ID" DataUrl="/Share/Query?name=GetDeptNameByKey&amp;CompanyID={@/Parameters[CompanyID]}&amp;Key=" IsAutoHeight="false" />
        </Field>
        <Field RowIndex="1" ColumnIndex="2" ColumnSpan="2" Title="事业部" FieldType="ComboBox">
          <ComboBox Tag="input" Name="BUID" Class="edit-input easyui-combobox" Options="editable:false" IsRequired="false" DisplayMember="Name" ValueMember="BUID" DataUrl="/Share/Query?name=GetBUName" IsAutoHeight="false" />
        </Field>
        <Field RowIndex="2" ColumnSpan="2" Title="负责人" FieldType="ComboTree">
          <ComboTree Tag="input" ID="Manager" Name="ManagerID" Class="edit-input easyui-combotree" Options="editable:false" IsRequired="false" DataUrl="/Share/Query?name=GetManager&amp;resultformat=jsontree&amp;root=000000&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID={@/Parameters[CompanyID]}&amp;CompanyName={@/Parameters[Name]}" DisplayMember="text" ValueMember="id" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;var ID=rec.id;&#xD;&#xA;if(ID!=''){&#xD;&#xA;if(ID.charAt(0)!='E'){$('#Manager').combotree('unselect',id);}&#xD;&#xA;}&#xD;&#xA;}" />
        </Field>
        <Field FieldType="ComboBox">
          <Input Tag="input" Class="edit-input" />
        </Field>
      </Fields>
      <ToolBar Tag="div" ID="toolbar" Class="dialog-button" PageID="P01002">
        <Buttons>
          <UIButton Tag="a" Class="easyui-linkbutton edit-button" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGReplace('dataform', '/Page/P01002/Query', 'datagrid')" />
          <UIButton Tag="a" Class="easyui-linkbutton edit-button" Options="iconCls:'icon-cancel'" Title="取消" Action="cancel()" />
        </Buttons>
      </ToolBar>
    </Form>
  </Page>
</EditDialogActionCommand>]]></Command>
    <Command CommandID="M01077" Name="搜索页面" Description="这个命令会直接返回到客户端，无需后继命令" CommandType="FormViewActionCommand"><![CDATA[<FormViewActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html" ViewPath="~/Views/Page/Edit.cshtml" SettingType="EditDialog">
  <Parameter Name="ItemsSource_IsValid" Type="Const" DefaultValue=":全部|1:有效|0:无效" />
  <Parameter Name="CompanyName" Path="Results[返回公司].Items" Type="Parameter" />
  <Parameter Name="BUName" Path="Results[返回事业部].Items" Type="Parameter" />
  <Parameter Name="DeptName" Path="Results[返回部门].Items" Type="Parameter" />
  <Form>
    <Controls>
      <DataView ID="dataform" Class="form-dialog">
        <Controls>
          <StackPanel Class="edit-dialog">
            <Controls>
              <StackPanel Class="edit-panel">
                <Controls>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Name="Name" Class="edit-label" Title="部门名称：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="Name" Class="edit-input easyui-textbox" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="所属公司：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="CompanyName" Class="edit-input easyui-textbox" Style="width:120px" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('CompanyName',['C:CompanyID'],'4')" />
                          <TextBox Name="CompanyID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="上级部门：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ParentName" Class="edit-input easyui-textbox" Style="width:120px" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('ParentName',['D:ParentID'],'3')" />
                          <TextBox Name="ParentID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="事业部：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <ComboBox Name="BUID" Class="edit-dropdownlist easyui-combobox" Options="editable:false" ItemsSource="Parameters[BUName]" DisplayMemeber="Name" ValueMember="BUID" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="负责人：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ManagerName" Class="edit-input easyui-textbox" Style="width:120px" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('ManagerName',['E:ManagerID'],'1')" />
                          <TextBox Name="ManagerID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="状态：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <ComboBox Name="IsActive" Class="edit-dropdownlist easyui-combobox" Options="editable:false" ItemsSource="Parameters[ItemsSource_IsValid]" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
            </Controls>
          </StackPanel>
        </Controls>
      </DataView>
      <StackPanel Class="dialog-button">
        <Controls>
          <Button Class="easyui-linkbutton edit-button" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGReplace('dataform', '/Page/P01002/Query', 'datagrid')" />
          <Button Class="easyui-linkbutton edit-button" Options="iconCls:'icon-cancel'" Title="取消" Action="cancel()" />
        </Controls>
      </StackPanel>
    </Controls>
  </Form>
</FormViewActionCommand>]]></Command>
    <Command CommandID="M01505" Name="xxx" CommandType="QuerySqlCommand"><![CDATA[<QueryCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="xx" GroupName="组织结构" TableName="hr_Department" CommandName="GetAll" />]]></Command>
    <Command CommandID="M01504" Name="xx" CommandType="ReportActionCommand"><![CDATA[<ReportActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ContentHeader>xxx</ContentHeader>
  <ContentFooter>xxx</ContentFooter>
  <Parameter Name="" Type="Parameter" />
  <DataSource Name="Data" Path="Results[xxx].Items" Type="Parameter" />
</ReportActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01037" Name="Query" Title="检索" ActionValue="2">
    <Command CommandID="M01766" Name="查询总数" CommandType="ScalarSqlCommand"><![CDATA[<ScalarCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="执行查询" GroupName="组织结构" TableName="hr_Department" CommandName="QueryCount" SqlType="Scalar">
  <Parameter Name="Key" Path="Request[Key]" Type="Parameter" />
  <Parameter Name="CompanyID" Path="Request[CompanyID]" Type="Parameter" />
  <Parameter Name="UserID" Path="CurrentUserID" Type="SystemParameter" />
</ScalarCommand>]]></Command>
    <Command CommandID="M01078" Name="执行查询" Description="本查询的结果值为JSON，参数路径为Results[执行查询].Json" CommandType="QueryJsonSqlCommand"><![CDATA[<QueryJsonCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="搜索结果" GroupName="组织结构" TableName="hr_Department" CommandName="Query" SqlType="QueryJson">
  <Parameter Name="CompanyID" Path="Request[CompanyID]" Type="Parameter" />
  <Parameter Name="Rows" Path="Request[Rows]" Type="Parameter" />
  <Parameter Name="UserID" Path="CurrentUserID" Type="SystemParameter" />
  <Parameter Name="Page" Path="Request[Page]" Type="Parameter">
    <Validator />
  </Parameter>
  <Parameter Name="Key" Path="Request[Key]" Type="Parameter" />
</QueryJsonCommand>]]></Command>
    <Command CommandID="M01079" Name="搜索结果" Description="返回搜索结果" CommandType="JsonActionCommand"><![CDATA[<JsonActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="application/json">
  <Parameter Name="rows" Path="Results[执行查询].Json" Type="Parameter" />
  <Parameter Name="HasError" Path="Results[执行查询].IsError" Type="Parameter" />
  <Parameter Name="ErrorMessage" Path="Results[执行查询].ErrorMessage" Type="Parameter" />
  <Parameter Name="total" Path="Results[查询总数].Value" Type="Parameter" />
</JsonActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01038" Name="Create" Title="新增" ActionValue="4">
    <Command CommandID="M01226" Name="新增页面copy" CommandType="EditDialogActionCommand"><![CDATA[<EditDialogActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html">
  <Parameter Name="CompanyID" Path="CurrentUserProfiles" Type="SystemParameter" DefaultValue="CompanyID" />
  <Parameter Name="Default" Type="Const" DefaultValue="000000" />
  <Page SettingType="EditDialog">
    <Form ID="dataform" Class="form-dialog">
      <TableLayout />
      <Fields>
        <Field Title="部门名称" FieldType="TextBox">
          <Input Tag="input" Name="Name" Class="edit-input easyui-textbox" Options="missingMessage:'请输入部门名称',required:true,validType:'length[1,20]',invalidMessage:'部门名称不能大于20'" />
        </Field>
        <Field Title="所属公司" FieldType="ComboBox">
          <ComboBox Tag="input" ID="CompanyID" Name="CompanyID" Class="edit-input easyui-combobox" Options="editable:false,missingMessage:'请选择所属公司',required:true,valueField:'ID',textField:'Name',method:'post'" Binding="Parameters[CompanyID]" DisplayMember="Name" ValueMember="ID" DataUrl="/Share/Query?name=GetCompanyName&amp;Key=" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;var url='/Share/Query?name=GetDeptTreeNoParent&amp;resultformat=jsontree&amp;root=&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID='+rec.ID;&#xD;&#xA;var url1='/Share/Query?name=GetManager&amp;resultformat=jsontree&amp;root=000000&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID='+rec.ID&#xD;&#xA;+'&amp;CompanyName='+rec.Name;&#xD;&#xA;$('#Parent').combotree({url:url});&#xD;&#xA;$('#Manager').combotree({url:url1});&#xD;&#xA;}" />
        </Field>
        <Field Title="上级部门" FieldType="ComboTree">
          <ComboTree Tag="input" ID="Parent" Name="ParentID" Class="edit-input easyui-combotree" Options="editable:false" Binding="Parameters[Default]" IsRequired="false" DataUrl="/Share/Query?name=GetDeptTreeNoParent&amp;resultformat=jsontree&amp;root=&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID={@/Parameters[CompanyID]}" DisplayMember="text" ValueMember="id" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;$.post('/Share/Query?name=GetBUIDBYDept&amp;DeptID='+rec.id,function(re){&#xD;&#xA;$('#BUID').combobox('setValue', re[0].BUID);&#xD;&#xA;})&#xD;&#xA;}" />
        </Field>
        <Field Title="事业部" FieldType="ComboBox">
          <ComboBox Tag="input" ID="BUID" Name="BUID" Class="edit-input easyui-combobox" Options="editable:false" IsRequired="false" DisplayMember="Name" ValueMember="BUID" DataUrl="/Share/Query?name=GetBUName" IsAutoHeight="false" />
        </Field>
        <Field Title="负责人" FieldType="ComboTree">
          <ComboTree Tag="input" ID="Manager" Name="ManagerID" Class="edit-input easyui-combotree" Options="editable:false" IsRequired="false" DataUrl="/Share/Query?name=GetManager&amp;resultformat=jsontree&amp;root=000000&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID={@/Parameters[CompanyID]}" DisplayMember="text" ValueMember="id" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;var ID=rec.id;&#xD;&#xA;if(ID!=''){&#xD;&#xA;if(ID.charAt(0)!='E'){$('#Manager').combotree('unselect',id);}&#xD;&#xA;}&#xD;&#xA;}" />
        </Field>
        <Field FieldType="TextBox">
          <Input Tag="input" ID="Managerurl" Class="edit-input" InputType="hidden" IsRequired="false" IsHidden="true" />
        </Field>
        <Field Title="排序" FieldType="TextBox">
          <Input Tag="input" Name="SortID" Class="edit-input easyui-numberspinner easyui-textbox" Options="min:1,max:100,required:true,missingMessage:'请输入顺序'" IsRequired="false" />
        </Field>
        <Field Title="备注" FieldClass="edit-field-r2" ContentClass="edit-content-r2" FieldType="TextBox">
          <Input Tag="input" Name="Description" Class="edit-input easyui-textbox" Style="height:90px" Options="multiline:true,validType:'length[1,200]',invalidMessage:'备注不能大于200'" IsRequired="false" />
        </Field>
      </Fields>
      <ToolBar Tag="div" ID="toolbar" Class="dialog-button" PageID="P01002">
        <Buttons>
          <UIButton Tag="a" Class="edit-button easyui-linkbutton" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGAppend('dataform', '/Page/P01002/Add','datagrid')" />
          <UIButton Tag="a" Class="edit-button easyui-linkbutton" Options="iconCls:'icon-cancel'" Title="取消" Action="cancel()" />
        </Buttons>
      </ToolBar>
    </Form>
  </Page>
</EditDialogActionCommand>]]></Command>
    <Command CommandID="M01080" Name="新增页面" Description="这个命令会直接返回到客户端，无需后继命令" CommandType="FormViewActionCommand"><![CDATA[<FormViewActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html" ViewPath="~/Views/Page/Edit.cshtml" SettingType="EditDialog">
  <Parameter Name="CompanyName" Path="Results[返回公司信息].Items" Type="Parameter" />
  <Parameter Name="BUName" Path="Results[返回事业部信息].Items" Type="Parameter" />
  <Parameter Name="DeptName" Path="Results[返回部门信息].Items" Type="Parameter" />
  <Form>
    <Controls>
      <DataView ID="dataform" Class="form-dialog">
        <Controls>
          <StackPanel Class="edit-dialog">
            <Controls>
              <StackPanel Class="edit-panel">
                <Controls>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Name="Name" Class="edit-label" Title="部门名称：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="Name" Class="edit-input easyui-textbox" Options="missingMessage:'请输入部门名称',required:true,validType:'length[1,20]',invalidMessage:'名称字数不得超过20个字符'" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="上级部门：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ParentName" Class="edit-input easyui-textbox" Style="width:120px" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('ParentName',['D:ParentID','C:CompanyID'],'3','C-D')" />
                          <TextBox Name="ParentID" IsHidden="true" />
                          <TextBox Name="CompanyID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="事业部：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <ComboBox Name="BUID" Class="edit-dropdownlist easyui-combobox" Options="editable:false" ItemsSource="Parameters[BUName]" DisplayMemeber="Name" ValueMember="BUID" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="负责人：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ManagerName" Class="edit-input easyui-textbox" Style="width:120px" Binding="ManagerName" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('ManagerName',['E:ManagerID'],'1')" />
                          <TextBox Name="ManagerID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field-r2">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="备注：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content-r2">
                        <Controls>
                          <TextBox Name="Description" Class="edit-input easyui-textbox" Style="height:90px" Options="multiline:true,validType:'length[1,200]',invalidMessage:'备注字数不得超过200个字符',nowrap:false" Binding="Description" IsMutiLine="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="showMsg">
                        <Controls>
                          <Label ID="showMsg" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                </Controls>
              </StackPanel>
            </Controls>
          </StackPanel>
        </Controls>
      </DataView>
      <StackPanel Class="dialog-button">
        <Controls>
          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGAppend('dataform', '/Page/P01002/Add', 'datagrid')" />
          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-cancel'" Title="取消" Action="cancel()" />
        </Controls>
      </StackPanel>
    </Controls>
  </Form>
</FormViewActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01039" Name="Add" Title="新增" ActionValue="4" ErrorCommand="新增结果">
    <Command CommandID="M01081" Name="执行新增" Description="本查询的结果值为JSON，参数路径为Results[执行新增].Json" CommandType="QueryJsonSqlCommand"><![CDATA[<QueryJsonCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="新增结果" GroupName="组织结构" TableName="hr_Department" CommandName="Add" SqlType="QueryJson">
  <Parameter Name="DeptID" Path="SerialCode" Type="SystemParameter" DefaultValue="Depart,D,6" />
  <Parameter Name="Name" Path="Request[Name]" Type="Parameter" Converter="Trim" />
  <Parameter Name="ManagerID" Path="Request[ManagerID]" Type="Parameter" />
  <Parameter Name="ParentID" Path="Request[ParentID]" Type="Parameter" Converter="Trim" />
  <Parameter Name="CompanyID" Path="Request[CompanyID]" Type="Parameter" />
  <Parameter Name="BUID" Path="Request[BUID]" Type="Parameter" />
  <Parameter Name="Description" Path="Request[Description]" Type="Parameter" Converter="Trim" />
  <Parameter Name="IsActive" Path="Request[IsActive]" Type="Const" DefaultValue="1" />
  <Parameter Name="SortID" Path="Request[SortID]" Type="Parameter" />
  <Parameter Name="CreatedUser" Path="CurrentUserID" Type="SystemParameter" />
  <Parameter Name="CreatedTime" Path="CurrentDateTime" Type="SystemParameter" />
  <Parameter Name="ModifiedUser" Path="CurrentUserID" Type="SystemParameter" />
  <Parameter Name="ModifiedTime" Path="CurrentDateTime" Type="SystemParameter" />
</QueryJsonCommand>]]></Command>
    <Command CommandID="M01082" Name="新增结果" Description="返回新增结果" CommandType="JsonActionCommand"><![CDATA[<JsonActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="application/json">
  <Parameter Name="Data" Path="Results[执行新增].Json" Type="Parameter" />
  <Parameter Name="HasError" Path="Results[执行新增].IsError" Type="Parameter" />
  <Parameter Name="ErrorMessage" Path="Results[执行新增].ErrorMessage" Type="Parameter" />
</JsonActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01044" Name="Edit" Title="编辑" ActionValue="8">
    <Command CommandID="M01500" Name="返回事业部" CommandType="QuerySqlCommand"><![CDATA[<QueryCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="部门详情查询" GroupName="组织结构" TableName="hr_BU" CommandName="GetName" />]]></Command>
    <Command CommandID="M01095" Name="部门详情查询" CommandType="QuerySqlCommand"><![CDATA[<QueryCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="编辑部门" GroupName="组织结构" TableName="hr_Department" CommandName="GetItem">
  <Parameter Name="DeptID" Path="Request[ID]" Type="Parameter" />
</QueryCommand>]]></Command>
    <Command CommandID="M01096" Name="部门详情窗体" CommandType="FormViewActionCommand"><![CDATA[<FormViewActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html" ViewPath="~/Views/Page/Edit.cshtml" SettingType="EditDialog">
  <Parameter Name="Data" Path="LastResult.Items" Type="Parameter" />
  <Parameter Name="DeptName" Path="Results[返回部门].Items" Type="Parameter" />
  <Parameter Name="CompanyName" Path="Results[返回公司].Items" Type="Parameter" />
  <Parameter Name="BUName" Path="Results[返回事业部].Items" Type="Parameter" />
  <Form>
    <Controls>
      <DataView ID="dataform" Class="form-dialog" Binding="Parameters[Data]">
        <Controls>
          <StackPanel Class="edit-dialog">
            <Controls>
              <StackPanel Class="edit-panel">
                <Controls>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="部门名称：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="DeptName" Class="edit-input easyui-textbox" Options="missingMessage:'请输入部门名称',required:true,validType:'length[1,20]',invalidMessage:'名称字数不得超过20个字符'" Binding="DeptName" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="上级部门：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ParentName" Class="edit-input easyui-textbox" Style="width:120px" Binding="ParentName" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('ParentName','ParentID','3')" />
                          <TextBox Name="ParentID" Binding="ParentID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="所属公司：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="CompanyName" Class="edit-input easyui-textbox" Style="width:120px" Options="missingMessage:'请选择所属公司',required:true" Binding="CompanyName" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Action="ShowOrgTree('CompanyName','CompanyID','4')" />
                          <TextBox Name="CompanyID" Binding="CompanyID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="事业部：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <ComboBox ID="BUID" Name="BUID" Class="edit-dropdownlist easyui-combobox" Options="editable:false" Binding="BUID" ItemsSource="/Parameters[BUName]" DisplayMemeber="Name" ValueMember="BUID" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="负责人：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ManagerName" Class="edit-input easyui-textbox" Style="width:120px" Binding="ManagerName" IsReadOnly="true" />
                          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-search'" Title="选择" Action="ShowOrgTree('ManagerName','ManagerID','1')" />
                          <TextBox Name="ManagerID" Binding="ManagerID" IsHidden="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field-r2">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="备注：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content-r2">
                        <Controls>
                          <TextBox Name="Description" Class="edit-input easyui-textbox" Style="height:90px;" Options="multiline:true,validType:'length[1,200]',invalidMessage:'备注字数不得超过200个字符',nowrap:false" Binding="Description" IsMutiLine="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="showMsg">
                        <Controls>
                          <Label ID="showMsg" />
                        </Controls>
                      </StackPanel>
                      <TextBox Name="DeptID" Binding="DeptID" IsHidden="true" />
                    </Controls>
                  </StackPanel>
                </Controls>
              </StackPanel>
            </Controls>
          </StackPanel>
        </Controls>
      </DataView>
      <StackPanel Class="dialog-button">
        <Controls>
          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGUpdate('dataform', '/Page/P01002/Update', 'datagrid')" />
          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-cancel'" Title="返回" Action="cancel()" />
        </Controls>
      </StackPanel>
    </Controls>
  </Form>
</FormViewActionCommand>]]></Command>
    <Command CommandID="M01465" Name="编辑部门" CommandType="EditDialogActionCommand"><![CDATA[<EditDialogActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html">
  <Parameter Name="BUName" Path="Results[返回事业部].Items" Type="Parameter" />
  <Parameter Name="CompanyID" Path="CurrentUserProfiles" Type="SystemParameter" DefaultValue="CompanyID" />
  <Parameter Name="Name" Path="CurrentUserProfiles" Type="SystemParameter" DefaultValue="CompanyName" />
  <Parameter Name="Data" Path="LastResult.Items" Type="Parameter" />
  <Page SettingType="EditDialog">
    <Form ID="dataform" Class="form-dialog" DataBinding="Parameters[Data]">
      <TableLayout />
      <Fields>
        <Field Title="部门名称" FieldType="TextBox">
          <Input Tag="input" Name="Name" Class="edit-input easyui-textbox" Options="missingMessage:'请输入部门名称',required:true,validType:'length[1,20]',invalidMessage:'部门名称不能大于20'" Binding="DeptName" />
        </Field>
        <Field Title="所属公司" FieldType="ComboBox">
          <ComboBox Tag="input" Name="CompanyID" Class="edit-input easyui-combobox" Options="editable:false,missingMessage:'请选择所属公司',required:true,valueField:'ID',textField:'Name'" Binding="CompanyID" DisplayMember="Name" ValueMember="ID" DataUrl="/Share/Query?name=GetCompanyName&amp;Key=" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;var url='/Share/Query?name=GetDeptTreeNoParent&amp;resultformat=jsontree&amp;root=&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID='+rec.ID;&#xD;&#xA;var url1='/Share/Query?name=GetManager&amp;resultformat=jsontree&amp;root=000000&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID='+rec.ID&#xD;&#xA;+'&amp;CompanyName='+rec.Name;&#xD;&#xA;$('#Parent').combotree({url:url});&#xD;&#xA;$('#Manager').combotree({url:url1});&#xD;&#xA;}" />
        </Field>
        <Field Title="上级部门" FieldType="ComboTree">
          <ComboTree Tag="input" ID="Parent" Name="ParentID" Class="edit-input easyui-combotree" Options="editable:false" Binding="ParentID" IsRequired="false" DataUrl="/Share/Query?name=GetDeptTreeNoParent&amp;resultformat=jsontree&amp;root=&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID={@/Parameters[CompanyID]}" DisplayMember="text" ValueMember="id" IsAutoHeight="false" />
        </Field>
        <Field Title="事业部" FieldType="ComboBox">
          <ComboBox Tag="select" Name="BUID" Class="edit-input easyui-combobox" Style="width:184px;" Options="editable:false" Binding="BUID" IsRequired="false" ItemsSource="/Parameters[BUName]" DisplayMember="Name" ValueMember="BUID" IsAutoHeight="false" />
        </Field>
        <Field Title="负责人" FieldType="ComboTree">
          <ComboTree Tag="input" ID="Manager" Name="ManagerID" Class="edit-input easyui-combotree" Options="editable:false" Binding="ManagerID" IsRequired="false" DataUrl="/Share/Query?name=GetManager&amp;resultformat=jsontree&amp;root=000000&amp;pid=PID&amp;id=ID&amp;text=Name&amp;CompanyID={@/Parameters[CompanyID]}&amp;CompanyName={@/Parameters[Name]}" DisplayMember="text" ValueMember="id" IsAutoHeight="false" OnSelect="function(rec){&#xD;&#xA;var ID=rec.id;&#xD;&#xA;if(ID!=''){&#xD;&#xA;if(ID.charAt(0)!='E'){$('#Manager').combotree('unselect',id);}&#xD;&#xA;}&#xD;&#xA;}" />
        </Field>
        <Field Title="排序" FieldType="TextBox">
          <Input Tag="input" Name="SortID" Class="edit-input easyui-numberspinner easyui-textbox" Options="min:1,max:100,required:true,missingMessage:'请输入顺序'" Binding="SortID" />
        </Field>
        <Field FieldType="TextBox">
          <Input Tag="input" Name="DeptID" Class="edit-input" InputType="hidden" Binding="DeptID" IsRequired="false" IsHidden="true" />
        </Field>
        <Field Title="备注" FieldClass="edit-field-r2" ContentClass="edit-content-r2" FieldType="TextBox">
          <Input Tag="input" Name="Description" Class="edit-input easyui-textbox" Style="height:90px" Options="multiline:true,validType:'length[1,200]',invalidMessage:'备注不能大于200'" Binding="Description" IsRequired="false" />
        </Field>
      </Fields>
      <ToolBar Tag="div" ID="toolbar" Class="dialog-button" PageID="P01002">
        <Buttons>
          <UIButton Class="edit-button easyui-linkbutton" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGUpdate('dataform', '/Page/P01002/Update', 'datagrid')" />
          <UIButton Class="edit-button easyui-linkbutton" Options="iconCls:'icon-cancel'" Title="取消" Action="cancel()" />
        </Buttons>
      </ToolBar>
    </Form>
  </Page>
</EditDialogActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01041" Name="Update" Title="编辑" ActionValue="8" ErrorCommand="编辑结果">
    <Command CommandID="M01464" Name="更新部门" CommandType="QuerySqlCommand"><![CDATA[<QueryCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="编辑结果" GroupName="组织结构" TableName="hr_Department" CommandName="Update">
  <Parameter Name="Name" Path="Request[Name]" Type="Parameter" Converter="Trim" />
  <Parameter Name="ParentID" Path="Request[ParentID]" Type="Parameter" />
  <Parameter Name="CompanyID" Path="Request[CompanyID]" Type="Parameter" />
  <Parameter Name="ManagerID" Path="Request[ManagerID]" Type="Parameter" />
  <Parameter Name="BUID" Path="Request[BUID]" Type="Parameter" />
  <Parameter Name="Description" Path="Request[Description]" Type="Parameter" Converter="Trim" />
  <Parameter Name="SortID" Path="Request[SortID]" Type="Parameter" />
  <Parameter Name="ModifiedUser" Path="CurrentUserID" Type="SystemParameter" />
  <Parameter Name="ModifiedTime" Path="CurrentDateTime" Type="SystemParameter" />
  <Parameter Name="DeptID" Path="Request[DeptID]" Type="Parameter" />
</QueryCommand>]]></Command>
    <Command CommandID="M01085" Name="编辑结果" Description="返回编辑结果" CommandType="JsonActionCommand"><![CDATA[<JsonActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="application/json">
  <Parameter Name="Data" Path="Results[更新部门].Items" Type="Parameter" />
  <Parameter Name="HasError" Path="Results[更新部门].IsError" Type="Parameter" />
  <Parameter Name="ErrorMessage" Path="Results[更新部门].ErrorMessage" Type="Parameter" />
</JsonActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01042" Name="Delete" Title="删除" ActionValue="16" ErrorCommand="删除结果">
    <Command CommandID="M01086" Name="执行删除" Description="本查询的结果值为JSON，参数路径为Results[执行删除].Json" CommandType="QueryJsonSqlCommand"><![CDATA[<QueryJsonCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="删除结果" GroupName="组织结构" TableName="hr_Department" CommandName="Delete" SqlType="QueryJson">
  <Parameter Name="ModifiedUser" Path="CurrentUserID" Type="SystemParameter" />
  <Parameter Name="ModifiedTime" Path="CurrentDateTime" Type="SystemParameter" />
  <Parameter Name="DeptIDs" Path="Request[keys]" Type="Parameter" />
</QueryJsonCommand>]]></Command>
    <Command CommandID="M01087" Name="删除结果" Description="返回删除结果" CommandType="JsonActionCommand"><![CDATA[<JsonActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="application/json">
  <Parameter Name="Data" Path="Results[执行删除].Json" Type="Parameter" />
  <Parameter Name="HasError" Path="Results[执行删除].IsError" Type="Parameter" />
  <Parameter Name="ErrorMessage" Path="Results[执行删除].ErrorMessage" Type="Parameter" />
</JsonActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01043" Name="Detail" Title="查看" ActionValue="32">
    <Command CommandID="M01095" Name="部门详情查询" CommandType="QuerySqlCommand"><![CDATA[<QueryCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NextCommand="部门详情窗体" GroupName="组织结构" TableName="hr_Department" CommandName="GetItem">
  <Parameter Name="DeptID" Path="Request[ID]" Type="Parameter" />
</QueryCommand>]]></Command>
    <Command CommandID="M01096" Name="部门详情窗体" CommandType="FormViewActionCommand"><![CDATA[<FormViewActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html" ViewPath="~/Views/Page/Edit.cshtml" SettingType="EditDialog">
  <Parameter Name="Data" Path="LastResult.Items" Type="Parameter" />
  <Form>
    <Controls>
      <DataView ID="dataform" Class="form-dialog" Binding="Parameters[Data]">
        <Controls>
          <StackPanel Class="edit-dialog">
            <Controls>
              <StackPanel Class="edit-panel">
                <Controls>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-title" Title="部门名称：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="DeptName" Class="edit-input easyui-textbox" Binding="DeptName" IsReadOnly="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-title" Title="上级部门：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ParentName" Class="edit-input easyui-textbox" Binding="ParentName" IsReadOnly="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-title" Title="所属公司：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="CompanyName" Class="edit-input easyui-textbox" Binding="CompanyName" IsReadOnly="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-title" Title="事业部：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="BUName" Class="edit-input easyui-textbox" Binding="BUName" IsReadOnly="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-title" Title="负责人：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="ManagerName" Class="edit-input easyui-textbox" Binding="ManagerName" IsReadOnly="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field-r2">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-title" Title="备注：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content-r2">
                        <Controls>
                          <TextBox Name="Description" Class="edit-input easyui-textbox" Style="height:90px;" Options="multiline:true" Binding="Description" IsReadOnly="true" IsMutiLine="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls>
                      <StackPanel Class="edit-title">
                        <Controls>
                          <Label Class="edit-label" Title="排序：" />
                        </Controls>
                      </StackPanel>
                      <StackPanel Class="edit-content">
                        <Controls>
                          <TextBox Name="SortID" Class="edit-input easyui-textbox" Binding="SortID" IsReadOnly="true" />
                        </Controls>
                      </StackPanel>
                    </Controls>
                  </StackPanel>
                  <StackPanel Class="edit-field">
                    <Controls />
                  </StackPanel>
                </Controls>
              </StackPanel>
            </Controls>
          </StackPanel>
        </Controls>
      </DataView>
      <StackPanel Class="dialog-button">
        <Controls>
          <Button Class="edit-button easyui-linkbutton" Options="iconCls:'icon-cancel'" Title="关闭" Action="cancel()" />
        </Controls>
      </StackPanel>
    </Controls>
  </Form>
</FormViewActionCommand>]]></Command>
  </Action>
  <Action ActionID="A01063" Name="GetTreeData" Title="获取树的数据">
    <Command CommandID="M01225" Name="查询树结构" CommandType="QueryJsonSqlCommand"><![CDATA[<QueryJsonCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" CommandName="" SqlType="QueryJson" />]]></Command>
  </Action>
  <Action ActionID="A01064" Name="GetDept" Title="根据联动获得公司所属部门">
    <Command CommandID="M01225" Name="获取部门" CommandType="QueryJsonSqlCommand"><![CDATA[<QueryJsonCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" CommandName="" SqlType="QueryJson">
  <Parameter Name="CompanyID" Path="Request[CompanyID]" Type="Parameter" />
</QueryJsonCommand>]]></Command>
  </Action>
  <Action ActionID="81102e91-d00b-4de0-bea0-78c5e70c0c25" Name="Search1" Title="检索" ActionValue="2">
    <Command CommandID="M01828" Name="检索" CommandType="EditDialogActionCommand"><![CDATA[<EditDialogActionCommand xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ContentType="text/html">
  <Page SettingType="EditDialog">
    <ContentHeader>&lt;script type="text/javascript"&gt;
$(function(){
var items='';
var options='';
$("#Key").combobox({
            mode:'remote',
            loader: function (param,success, row)
            {
                var q = param.q;
                if (q == undefined) q = "";
                $.ajax({
                    url: "/Share/Query?name=GetDeptNameByKey&amp;Key=" + encodeURIComponent(q),
                    type: 'post',
                    success: function (data) {
                         options= $.map(data, function (item) {
                            return { ID: item.ID, Name: item.Name};
                        });
                        success(options);
                    }
                })
            }
})
$("#CompanyID").combobox({
            mode:'remote',
            loader: function (param,success, row)
            {
                var q = param.q;
                if (q == undefined) q = "";
                $.ajax({
                    url: "/Share/Query?name=GetCompanyNameByKey&amp;Key=" + encodeURIComponent(q),
                    type: 'post',
                    success: function (data) {
                         items = $.map(data, function (item) {
                            return { CompanyID: item.CompanyID, Name: item.JC};
                        });
                        success(items);
                    }
                })
            }
        })
})
&lt;/script&gt;</ContentHeader>
    <Form ID="dataform" Class="form-dialog">
      <TableLayout />
      <Fields>
        <Field Title="所属公司" FieldType="ComboBox">
          <ComboBox Tag="input" ID="CompanyID" Name="CompanyID" Class="easyui-combobox edit-input" IsRequired="false" DisplayMember="Name" ValueMember="CompanyID" DataUrl="/Share/Query?name=GetCompanyNameByKey&amp;Key=" IsAutoHeight="false" />
        </Field>
        <Field Title="关键词" FieldType="ComboBox">
          <ComboBox Tag="input" ID="Key" Name="Key" Class="easyui-combobox edit-input" Options="validType:'length[1,20]',invalidMessage:'关键词不能大于20'" IsRequired="false" DisplayMember="Name" ValueMember="ID" DataUrl="/Share/Query?name=GetDeptNameByKey&amp;Key=" IsAutoHeight="false" />
        </Field>
      </Fields>
      <ToolBar Tag="div" ID="toolbar" Class="dialog-button" PageID="P01002">
        <Buttons>
          <UIButton Class="easyui-linkbutton edit-button" Options="iconCls:'icon-ok'" Title="确定" Action="submitAct_DGReplace('dataform', '/Page/P01002/Query', 'datagrid')" />
          <UIButton Class="easyui-linkbutton edit-button" Options="iconCls:'icon-cancel'" Title="取消" Action="cancel()" />
        </Buttons>
      </ToolBar>
    </Form>
  </Page>
</EditDialogActionCommand>]]></Command>
  </Action>
  <Layout EditFieldClass="edit-field" EditLabelClass="edit-label" />
  <Buttons>
    <Button ID="btn-search" Title="检索" ActionValue="2" Action="showActDlg('检索','/Page/P01002/Search',400,300)" Class="easyui-linkbutton" Option="iconCls:'icon-search'" />
    <Button ID="btn-query" Title="确定" ActionValue="2" Action="submitAct_DGReplace('dataform','/Page/P01002/Query','datagrid')" Class="easyui-linkbutton edit-button" Option="iconCls:'icon-ok'" ShowInToolBar="false" />
    <Button ID="btn-detail" Title="查看" ActionValue="4" Action="showActDlg('datagrid','查看','/Page/P01002/Detail',400,300)" Class="easyui-linkbutton toolradio" Option="iconCls:'icon-add'" />
    <Button ID="btn-create" Title="新增" ActionValue="8" Action="showActDlg('新增','/Page/P01002/Create',400,300)" Class="easyui-linkbutton" Option="iconCls:'icon-add'" />
    <Button ID="btn-add" Title="确定" ActionValue="8" Action="submitAct_DGAppend('dataform','/Page/P01002/Add','datagrid')" Class="easyui-linkbutton edit-button" Option="iconCls:'icon-ok'" ShowInToolBar="false" />
    <Button ID="btn-edit" Title="修改" ActionValue="16" Action="showActDlg_DGItemActDlg('datagrid','修改','/Page/P01002/Edit',400,300)" Class="easyui-linkbutton toolradio" Option="iconCls:'icon-edit'" />
    <Button ID="btn-update" Title="确定" ActionValue="16" Action="submitAct_DGUpdate('dataform','/Page/P01002/Update','datagrid')" Class="easyui-linkbutton edit-button" Option="iconCls:'icon-ok'" ShowInToolBar="false" />
    <Button ID="btn-delete" Title="删除" ActionValue="32" Action="showActDlg_DGItemsConfirm('datagrid','删除','确认删除选择项？','/Page/P01002/Delete',400,300)" Class="easyui-linkbutton toolmultiple" Option="iconCls:'icon-cancel'" />
    <Button ID="btn-import" Title="导入" ActionValue="64" Action="showActDlg('导入','/Page/P01002/Import',400,300)" Class="easyui-linkbutton" Option="iconCls:'icon-import'" />
    <Button ID="btn-export" Title="导出" ActionValue="128" Action="showActDlg('导出','/Page/P01002/Export',400,300)" Class="easyui-linkbutton" Option="iconCls:'icon-export'" />
    <Button ID="btn-cancel" Title="取消" Action="cancel()" Class="easyui-linkbutton edit-button" Option="iconCls:'icon-cancel'" ShowInToolBar="false" />
    <Button ID="btn-close" Title="确定" Action="cancel()" Class="easyui-linkbutton edit-button" ShowInToolBar="false" />
  </Buttons>
  <EditSource GroupName="组织结构" TableName="hr_Department" Key="DeptID" LogicDeleteFlag="IsActive:0">
    <Fields>
      <EditField Name="DeptID" Title="DeptID" DataType="System.String" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
      <EditField Name="Name" Title="Name" DataType="System.String" />
      <EditField Name="ManagerID" Title="ManagerID" DataType="System.String" IsRequired="false" />
      <EditField Name="ParentID" Title="ParentID" DataType="System.String" IsRequired="false" />
      <EditField Name="CompanyID" Title="CompanyID" DataType="System.String" />
      <EditField Name="BUID" Title="BUID" DataType="System.String" IsRequired="false" />
      <EditField Name="Description" Title="Description" DataType="System.String" ShowInSearch="false" IsRequired="false" />
      <EditField Name="IsActive" Title="IsActive" DataType="System.Boolean" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" IsRequired="false" EditBox="ComboBox" />
      <EditField Name="SortID" Title="SortID" DataType="System.Int32" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
      <EditField Name="CreatedUser" Title="CreatedUser" DataType="System.String" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
      <EditField Name="CreatedTime" Title="CreatedTime" DataType="System.DateTime" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
      <EditField Name="ModifiedUser" Title="ModifiedUser" DataType="System.String" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
      <EditField Name="ModifiedTime" Title="ModifiedTime" DataType="System.DateTime" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
      <EditField Name="AutoKey" Title="AutoKey" DataType="System.Int32" ShowInGrid="false" ShowInCreate="false" ShowInEdit="false" ShowInDetail="false" ShowInSearch="false" IsRequired="false" EnableEdit="false" />
    </Fields>
    <ChildTables />
  </EditSource>
</MvcEditPage>